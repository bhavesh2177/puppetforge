apiVersion: v1
kind: LimitRange
metadata:
  name: <%= @name_space.downcase %>-limitrange
  namespace: <%= @name_space.downcase %>
spec:
  limits:
  - max:
      cpu: "<%= @total_cpu_cores.to_i - 2 %>"
      memory: <%= @total_memory_gb.to_i - 2 %>Mi
    min:
      cpu: 500m
      memory: 512Mi
    type: Pod
  - default:
      cpu: 500m
      memory: 512Mi
    defaultRequest:
      cpu: 500m
      memory: 512Mi
    max:
      cpu: "<%= @total_cpu_cores.to_i - 2 %>"
      memory: <%= @total_memory_gb.to_i - 2 %>Mi
    min:
      cpu: 500m
      memory: 512Mi
    type: Container
